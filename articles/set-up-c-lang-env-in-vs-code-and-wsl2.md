---
title: "VS Code & WSL2 で C 言語の開発環境をサクッと構築する"
emoji: "⚙"
type: "tech" # tech: 技術記事 / idea: アイデア
topics: ["C", "C言語", "vscode", "WSL2"]
published: false
---

## この記事で行うこと

[WSL2（Windows Subsystem for Linux）]()を用いてインストールした Ubuntu 上に，**[VS Code]() で C 言語のコードを書いて簡単にコンパイルとデバッグが可能な環境**を作り上げます。

:::message alert

**WSL2 は Windows 固有の機能**です。MacOS をはじめとする Windows 以外の OS は本記事の対象外となります。

:::

## ターゲット

- VS Code で C 言語のコードを書きたい人
  - 特に，例えば C 言語は大学の授業でしか書く機会がないなど，さほど本格的な開発環境は求めていないケースを想定しています。
- 既に別の環境で C 言語のコードを書いているが，訳あって VS Code と WSL2 による環境へと移行しようか検討している人

## 導入手順

1. VS Code をインストールする
2. WSL2 を有効化し，Ubuntu をインストールする
3. GCC と GDB をインストールする
4. ワークスペースを作成する

### 1. VS Code をインストールする

:::message

既に Ubuntu をインストール済みの場合は，この手順を読み飛ばし，次の「[GCC と GDB をインストールする](#2.-wsl2-を有効化し，ubuntu-をインストールする)」にお進みください。

:::

### 2. WSL2 を有効化し，Ubuntu をインストールする

:::message

既に WSL2 で Ubuntu をインストール済みの場合は，この手順を読み飛ばし，次の「[GCC と GDB をインストールする](#3.-gcc-と-gdb-をインストールする)」にお進みください。

:::

### 3. GCC と GDB をインストールする

次のコマンドで C 言語のコンパイラーをインストールします。

```
sudo apt install gcc
sudo apt install gdb
```

### 4. ワークスペースを作成する

VS Code で C 言語のコードを書くためのワークスペース（作業場所）を作成します。今回は，例としてホームディレクトリーの直下に `example` という名のディレクトリーを作り，これをワークスペースとしましょう。具体的には，以下のコマンドをそのまま実行するだけです。

```
cd && mkdir test && code $_
```

続いて，以下のプログラム `example.c` を作成します。

```c:example.c
#include <stdio.h>

int main(void)
{
  printf("Hello, world!\n");
  return 0;
}
```

次に，`F5` キーを押してコンパイルを行いましょう。**ターミナルを開いて `Hello, world!` の表示が確認できれば，セットアップは無事完了です！**

```json:tasks.json
{
    "tasks": [
        {
            "type": "cppbuild",
            "label": "C/C++: gcc build active file",
            "command": "/usr/bin/gcc",
            "args": [
                "-fdiagnostics-color=always",
                "-g",
                "${file}",
                "-o",
                "${fileDirname}/${fileBasenameNoExtension}"
            ],
            "options": {
                "cwd": "${fileDirname}"
            },
            "problemMatcher": [
                "$gcc"
            ],
            "group": {
                "kind": "build",
                "isDefault": true
            },
            "detail": "Task generated by Debugger."
        }
    ],
    "version": "2.0.0"
}
```

```diff json:tasks.json
{
    "tasks": [
        {
            "type": "cppbuild",
            "label": "C/C++: gcc build active file",
            "command": "/usr/bin/gcc",
            "args": [
+               "-Wall",
                "-fdiagnostics-color=always",
                "-g",
                "${file}",
                "-o",
-               "${fileDirname}/${fileBasenameNoExtension}"
+               "${fileDirname}/${fileBasenameNoExtension}.out",
+               "-lm"
            ],
            "options": {
                "cwd": "${fileDirname}"
            },
            "problemMatcher": [
                "$gcc"
            ],
            "group": {
                "kind": "build",
                "isDefault": true
            },
            "detail": "Task generated by Debugger."
        }
    ],
    "version": "2.0.0"
}
```

## 参考
